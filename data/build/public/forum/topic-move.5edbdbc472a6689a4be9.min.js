"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,28310,34271,49888,49897,69185,86198,99127],{28310:((A,C,l)=>{var m,g;m=[l(65348),l(29930),l(91749),l(49897)],g=(function(E,y,v,f){const c={};let e,a;c.init=function(t,n,i){e||(c.tids=t,c.currentCid=n,c.onComplete=i,c.moveAll=!t,d())};function d(){app.parseAndTranslate("modals/move-topic",{},function(t){e=t,$("body").append(e),(c.moveAll||c.tids&&c.tids.length>1)&&e.find(".card-header").translateText("[[topic:move-topics]]");const n=e.find('[component="category-selector"]');n.addClass("dropup"),E.init(n,{onSelect:r,privilege:"moderate"}),e.find("#move_thread_commit").on("click",u),e.find("#move_topic_cancel").on("click",o)})}function r(t){a=t,e.find("#move_thread_commit").prop("disabled",!1)}function u(){const t=e.find("#move_thread_commit");if(!t.prop("disabled")&&a&&a.cid){t.prop("disabled",!0),o();let n="[[topic:topic-move-success, "+a.name+"]]";c.tids&&c.tids.length>1?n="[[topic:topic-move-multiple-success, "+a.name+"]]":c.tids||(n="[[topic:topic-move-all-success, "+a.name+"]]");const i={tids:c.tids?c.tids.slice():null,cid:a.cid,currentCid:c.currentCid,onComplete:c.onComplete};if(config.undoTimeout>0)return y.alert({alert_id:"tids_move_"+(c.tids?c.tids.join("-"):"all"),title:"[[topic:thread-tools.move]]",message:n,type:"success",timeout:config.undoTimeout,timeoutfn:function(){s(i)},clickfn:function(h,D){delete D.timeoutfn,y.success("[[topic:topic-move-undone]]")}});s(i)}}function s(t){v.fire("action:topic.move",t),t.tids?t.tids.forEach(n=>{f.put(`/topics/${n}/move`,{cid:t.cid}).then(()=>{typeof t.onComplete=="function"&&t.onComplete()}).catch(y.error)}):socket.emit("topics.moveAll",t,function(n){if(n)return y.error(n);typeof t.onComplete=="function"&&t.onComplete()})}function o(){e&&(e.remove(),e=null)}return c}).apply(C,m),g!==void 0&&(A.exports=g)}),49897:((A,C,l)=>{l.r(C),l.d(C,{del:()=>s,get:()=>e,head:()=>a,patch:()=>r,post:()=>d,put:()=>u});var m=l(91749),g=l.n(m),E=l(33530),y=l.n(E);const v=config.relative_path+"/api/v3";async function f(o,t){if(o.url=o.url.startsWith("/api")?config.relative_path+o.url:v+o.url,typeof t=="function"){c(o).then(n=>t(null,n),n=>t(n));return}try{return await c(o)}catch(n){if(n.message==="A valid login session was not found. Please log in and try again."){const{url:i}=await(0,m.fire)("filter:admin.reauth",{url:"login"});return(0,E.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go(i)})}throw n}}async function c(o){const{url:t}=o;delete o.url,o.data&&!(o.data instanceof FormData)&&(o.data=JSON.stringify(o.data||{}),o.headers["content-type"]="application/json; charset=utf-8"),{options:o}=await(0,m.fire)("filter:api.options",{options:o}),o.data&&(o.body=o.data,delete o.data);const n=await fetch(t,o),{headers:i}=n;if(i.get("x-redirect"))return c({url:i.get("x-redirect"),...o});const h=i.get("content-type"),D=h&&h.startsWith("application/json");let p;if(o.method!=="HEAD"&&(D?p=await n.json():p=await n.text()),!n.ok)throw p?new Error(D?p.status.message:p):new Error(n.statusText);return D&&p&&p.hasOwnProperty("status")&&p.hasOwnProperty("response")?p.response:p}function e(o,t,n){return f({url:o+(t&&Object.keys(t).length?"?"+$.param(t):"")},n)}function a(o,t,n){return f({url:o+(t&&Object.keys(t).length?"?"+$.param(t):""),method:"HEAD"},n)}function d(o,t,n){return f({url:o,method:"POST",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function r(o,t,n){return f({url:o,method:"PATCH",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function u(o,t,n){return f({url:o,method:"PUT",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function s(o,t,n){return f({url:o,method:"DELETE",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}}),65348:((A,C,l)=>{var m,g;m=[l(96349),l(33530),l(91749),l(17459)],g=(function(E,y,v,f){const c={};return c.init=function(e,a){if(!e||!e.length)return;a=a||{};const d=a.onSelect||function(){};a.states=a.states||["watching","tracking","notwatching","ignoring"],a.template=a.template||"partials/category/selector-dropdown-left",v.fire("action:category.selector.options",{el:e,options:a}),E.init(e,a);const r={el:e,selectedCategory:null};e.on("click","[data-cid]",function(){const s=$(this);return s.hasClass("disabled")?!1:(r.selectCategory(s.attr("data-cid")),d(r.selectedCategory))});let u=r.el.find('[component="category-selector-selected"]').html();return f.translate(u,s=>{u=s}),r.selectCategory=function(s){const o=r.el.find('[data-cid="'+s+'"]');r.selectedCategory={cid:s,name:o.attr("data-name")},o.length?r.el.find('[component="category-selector-selected"]').html(o.find('[component="category-markup"]').html()):r.el.find('[component="category-selector-selected"]').html(u)},r.getSelectedCategory=function(){return r.selectedCategory},r.getSelectedCid=function(){return r.selectedCategory?r.selectedCategory.cid:0},a.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(a.template,{selectedCategory:a.selectedCategory},function(s){r.el.find('[component="category-selector-selected"]').html(s.find('[component="category-selector-selected"]').html())}),r},c.modal=function(e){e=e||{},e.onSelect=e.onSelect||function(){},e.onSubmit=e.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:e.message},function(a){const d=y.dialog({title:e.title||"[[modules:composer.select-category]]",message:a,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:u}}}),r=c.init(d.find('[component="category-selector"]'),e);function u(s){return s.preventDefault(),r.selectedCategory&&(e.onSubmit(r.selectedCategory),d.modal("hide")),!1}e.openOnLoad&&d.on("shown.bs.modal",function(){d.find(".dropdown-toggle").dropdown("toggle")}),d.find("form").on("submit",u)})},c}).apply(C,m),g!==void 0&&(A.exports=g)}),96349:((A,C,l)=>{var m,g;m=[l(29930),l(89336),l(49897)],g=(function(E,y,v){const f={};return f.init=function(c,e){let a=e.defaultCategories||null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","tracking","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let d=[];Array.isArray(e.localCategories)&&(d=e.localCategories.map(t=>({...t})),a&&(a=[...d,...a])),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const r=c.find('[component="category-selector-search"]');if(!r.length)return;const u=r.parents('[component="category/dropdown"]').length>0||r.parents('[component="category-selector"]').length>0;c.on("show.bs.dropdown",function(){u&&r.removeClass("hidden");function t(){const n=r.find("input").val();n.length>1||!n&&!a?s(n,function(i){a=e.cacheList&&(a||i),o(i)}):!n&&a&&o(a)}r.on("click",function(n){n.preventDefault(),n.stopPropagation()}),r.find("input").val("").on("keyup",utils.debounce(t,300)),t()}),c.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||r.find("input").focus()}),c.on("hide.bs.dropdown",function(){u&&r.addClass("hidden"),r.off("click"),r.find("input").off("keyup")});function s(t,n){v.get("/search/categories",{search:t,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(i,{categories:h}){if(i)return E.error(i);n(d.concat(h))})}function o(t){const n=e.selectedCids.map(String);t.forEach(function(i){i.selected=n.includes(String(i.cid))}),app.parseAndTranslate(e.template,{categoryItems:t.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(i){c.find('[component="category/list"]').html(i.find('[component="category/list"]').html()),c.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!t.length);const h=y.Dropdown.getInstance(c.find(".dropdown-toggle").get(0));h&&h.update()})}},f}).apply(C,m),g!==void 0&&(A.exports=g)})}]);
