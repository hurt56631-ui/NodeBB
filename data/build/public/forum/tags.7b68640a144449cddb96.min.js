"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,82858,95738,99127],{22410:((w,T,u)=>{var d,g;d=[u(91749),u(29930),u(49897)],g=(function(p,_,m){const c={};let l,i=0,o=!1,f,E=0;c.init=function(t,n){const e=$("body");typeof t=="function"?(l=t,f=e):(l=n,f=t||e),i=$(window).scrollTop(),$(window).off("scroll",v).on("scroll",v),e.height()<=$(window).height()&&ajaxify.data.pagination&&ajaxify.data.pagination.pageCount>1&&l(1)};function v(){E&&clearTimeout(E),E=setTimeout(function(){E=0,x()},60)}function x(){const t=utils.findBootstrapEnvironment(),n=(t==="xs"||t==="sm")&&$("html").hasClass("composing");if(o||n||app.flags._glance)return;const e=$(window).scrollTop(),r=$(window).height(),s=f.height()-r,h=f.offset()?f.offset().top:0,a=100*(e-h)/(s<=0?r:s),A=15,D=85,y=e>i?1:-1;(a<A&&e<i||a>D&&e>i||a<0&&y>0&&s<0)&&l(y),i=e}return c.loadMore=function(t,n,e){if(o)return;o=!0;const r={method:t,data:n};p.fire("action:infinitescroll.loadmore",r),(r.method.startsWith("/")?m.get:socket.emit)(r.method,r.data,function(h,a){if(h)return o=!1,_.error(h);e(a,function(){o=!1})})},c.loadMoreXhr=function(t,n){if(o)return;o=!0;const e=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),r={url:e,data:t};p.fire("action:infinitescroll.loadmore.xhr",r),$.get(e,t,function(s){n(s,function(){o=!1})}).fail(function(s){o=!1,_.error(String(s.responseJSON||"[[error:no-connection]]"))})},c.removeExtra=function(t,n,e){let r=$();if(t.length<=e)return r;const s=t.length-e;if(n>0){const h=$(document).height(),a=$(window).scrollTop();r=t.slice(0,s).remove(),$(window).scrollTop(a+($(document).height()-h))}else r=t.slice(t.length-s).remove();return r},c}).apply(T,d),g!==void 0&&(w.exports=g)}),31042:((w,T,u)=>{var d,g;d=[u(22410),u(29930)],g=(function(p,_){const m={};m.init=function(){app.enterRoom("tags"),$("#tag-search").on("input propertychange",utils.debounce(function(){if(!$("#tag-search").val().length)return c();socket.emit("topics.searchAndLoadTags",{query:$("#tag-search").val()},function(i,o){if(i)return _.error(i);l(o.tags,!0)})},250)),p.init(m.loadMoreTags)},m.loadMoreTags=function(i){i<0||!$(".tag-list").length||$("#tag-search").val()||p.loadMore("topics.loadMoreTags",{after:$(".tag-list").attr("data-nextstart")},function(o,f){o&&o.tags&&o.tags.length?(l(o.tags,!1,f),$(".tag-list").attr("data-nextstart",o.nextStart)):f()})};function c(){socket.emit("topics.loadMoreTags",{after:0},function(i,o){if(i)return _.error(i);l(o.tags,!0)})}function l(i,o,f){f=f||function(){},app.parseAndTranslate("tags","tags",{tags:i},function(E){$(".tag-list")[o?"html":"append"](E),f()})}return m}).apply(T,d),g!==void 0&&(w.exports=g)}),49897:((w,T,u)=>{u.r(T),u.d(T,{del:()=>x,get:()=>i,head:()=>o,patch:()=>E,post:()=>f,put:()=>v});var d=u(91749),g=u.n(d),p=u(33530),_=u.n(p);const m=config.relative_path+"/api/v3";async function c(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:m+t.url,typeof n=="function"){l(t).then(e=>n(null,e),e=>n(e));return}try{return await l(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:r}=await(0,d.fire)("filter:admin.reauth",{url:"login"});return(0,p.confirm)("[[error:api.reauth-required]]",s=>{s&&ajaxify.go(r)})}throw e}}async function l(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,d.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:r}=e;if(r.get("x-redirect"))return l({url:r.get("x-redirect"),...t});const s=r.get("content-type"),h=s&&s.startsWith("application/json");let a;if(t.method!=="HEAD"&&(h?a=await e.json():a=await e.text()),!e.ok)throw a?new Error(h?a.status.message:a):new Error(e.statusText);return h&&a&&a.hasOwnProperty("status")&&a.hasOwnProperty("response")?a.response:a}function i(t,n,e){return c({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function o(t,n,e){return c({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},e)}function f(t,n,e){return c({url:t,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function E(t,n,e){return c({url:t,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function v(t,n,e){return c({url:t,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function x(t,n,e){return c({url:t,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}})}]);
