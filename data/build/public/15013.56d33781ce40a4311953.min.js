(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,15013,15794,25432,34271,36159,46379,49897,52185,58540,62441,74566,88189,92332,98463,99127],{12236:((A,E,l)=>{"use strict";var h,v;h=[l(49897),l(29930)],v=(function(b,P){const c={};c.init=function(t,n){const r=t.find(".draft-icon"),s=t.attr("data-uuid");function o(){$(`[component="composer"][data-uuid="${s}"]`).length&&(n.save_id||(n.save_id=utils.generateSaveId(app.user.uid)),c.addToDraftList("available",n.save_id),c.addToDraftList("open",n.save_id),u(t,r,n))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(o,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(o,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(o,1e3)),t.on("itemAdded",".tags",utils.debounce(o,1e3)),t.on("thumb.uploaded",o),r.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const a=c.getList("open");a.length&&a.forEach(g=>c.removeFromDraftList("open",g))}),c.migrateGuest()};function x(t){return parseInt(t,10)>0?localStorage:sessionStorage}c.get=function(t){if(!t)return null;const n=t.split(":")[1],r=x(n);try{const s=r.getItem(t),o=JSON.parse(s)||null;if(!o)throw new Error(`can't parse draft json for ${t}`);return o.save_id=t,o.timestamp&&(o.timestampISO=utils.toISOString(o.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:o,storage:r}),o}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),c.removeFromDraftList("available"),c.removeFromDraftList("open"),null}};function u(t,n,r){if(d(app.user.uid?"localStorage":"sessionStorage")&&r&&r.save_id&&t.length){const s=t.find("input.title"),o=s&&s.length&&s.val(),a=t.find("textarea").val(),g=x(app.user.uid);if(a.length||o&&o.length){const m={save_id:r.save_id,action:r.action,text:a,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(r.action==="topics.post"){const D=t.find("input.tags").val();m.tags=D,m.title=o,m.cid=r.cid,m.thumbs=r.thumbs||[]}else r.action==="posts.reply"?(m.title=r.title,m.tid=r.tid,m.toPid=r.toPid):r.action==="posts.edit"&&(m.pid=r.pid,m.title=o||r.title,m.thumbs=r.thumbs||[]);app.user.uid||(m.handle=t.find("input.handle").val()),g.setItem(r.save_id,JSON.stringify(m)),$(window).trigger("action:composer.drafts.save",{storage:g,postData:r,postContainer:t}),n.toggleClass("active",!0)}else c.removeDraft(r.save_id)}}c.removeDraft=function(t){if(!t)return;c.removeFromDraftList("available",t),c.removeFromDraftList("open",t);const n=t.split(":")[1],r=x(n);r.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:r,save_id:t})},c.getList=function(t){try{const n=localStorage.getItem(`drafts:${t}`);return JSON.parse(n)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},c.addToDraftList=function(t,n){if(!d(app.user.uid?"localStorage":"sessionStorage")||!n)return;const r=c.getList(t);r.includes(n)||(r.push(n),localStorage.setItem("drafts:"+t,JSON.stringify(r)))},c.removeFromDraftList=function(t,n){if(!d(app.user.uid?"localStorage":"sessionStorage")||!n)return;const r=c.getList(t);r.includes(n)&&(r.splice(r.indexOf(n),1),localStorage.setItem("drafts:"+t,JSON.stringify(r)))},c.migrateGuest=function(){if(d("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,n=Object.keys(sessionStorage).filter(function(o){return t.test(o)}),r=new Set([]),s=n.map(function(o){const a=o.split(":");return a[1]=app.user.uid,r.add(a.join(":")),a.join(":")});return n.forEach(function(o,a){localStorage.setItem(s[a],sessionStorage.getItem(o)),sessionStorage.removeItem(o)}),r.forEach(function(o){c.addToDraftList("available",o)}),r}},c.listAvailable=function(){return c.getList("available").map(c.get).filter(Boolean)},c.getAvailableCount=function(){return c.listAvailable().length},c.open=function(t){if(!t)return;const n=c.get(t);f(t,n)},c.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=c.getList("available"),n=c.getList("open");t.length&&t.forEach(function(r){if(!r||n.includes(r))return;const s=c.get(r);if(!s||!s.text&&!s.title){c.removeFromDraftList("available",r),c.removeFromDraftList("open",r);return}f(r,s)})};function f(t,n){const s=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(s,10)&&Promise.all([l.e(20056),l.e(23662),l.e(65285),l.e(40559),l.e(449),l.e(5785),l.e(58540)]).then(function(){var o=[l(71431)];(function(a){n.action==="topics.post"?a.newTopic({save_id:n.save_id,cid:n.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(n.handle),title:utils.escapeHTML(n.title),body:n.text,tags:String(n.tags||"").split(","),thumbs:n.thumbs||[]}):n.action==="posts.reply"?b.get("/topics/"+n.tid,{},function(g,m){if(g)return P.error(g);a.newReply({save_id:n.save_id,tid:n.tid,toPid:n.toPid,title:m.title,body:n.text})}):n.action==="posts.edit"&&a.editPost({save_id:n.save_id,pid:n.pid,title:n.title?utils.escapeHTML(n.title):void 0,body:n.text,thumbs:n.thumbs||[]})}).apply(null,o)}).catch(l.oe)}function d(t){var n;try{n=window[t];var r="__storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(s){return s instanceof DOMException&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&n&&n.length!==0}}return c}).apply(E,h),v!==void 0&&(A.exports=v)}),24187:((A,E,l)=>{"use strict";var h,v;h=[l(64061)],v=(function(){const b={};b.show=function(u,f){const d=u.hasOwnProperty("fileSize")&&u.fileSize!==void 0?parseInt(u.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:u.hasOwnProperty("showHelp")&&u.showHelp!==void 0?u.showHelp:!0,fileSize:d,title:u.title||"[[global:upload-file]]",description:u.description||"",button:u.button||"[[global:upload]]",accept:u.accept?u.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const n=t.find("#uploadForm");n.attr("action",u.route),n.find("#params").val(JSON.stringify(u.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),n.submit()}),n.submit(function(){return P(t,d,f),!1})})},b.hideAlerts=function(u){$(u).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function P(u,f,d){c(u,"status","[[uploads:uploading-file]]"),u.find("#upload-progress-bar").css("width","0%"),u.find("#upload-progress-box").show().removeClass("hide");const t=u.find("#fileInput");if(!t.val())return c(u,"error","[[uploads:select-file-to-upload]]");if(!x(t[0],f))return c(u,"error","[[error:file-too-big, "+f+"]]");b.ajaxSubmit(u,d)}function c(u,f,d){b.hideAlerts(u),f==="error"&&u.find("#fileUploadSubmitBtn").removeClass("disabled"),d=d.replace(/&amp;#44/g,"&#44"),u.find("#alert-"+f).translateText(d).removeClass("hide")}b.ajaxSubmit=function(u,f){u.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=w(t),c(u,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,n,r,s){u.find("#upload-progress-bar").css("width",s+"%")},success:function(t){let n=w(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(n=t.response.images),f(n[0].url),c(u,"success","[[uploads:upload-success]]"),setTimeout(function(){b.hideAlerts(u),u.modal("hide")},750)}})};function w(u){if(typeof u=="string")try{return JSON.parse(u)}catch(f){return console.error(f),{error:"[[error:parse-error]]"}}return u}function x(u,f){return window.FileReader&&f?u.files[0].size<=f*1e3:!0}return b}).apply(E,h),v!==void 0&&(A.exports=v)}),29869:(A=>{"use strict";A.exports=function(E,l,h){l.setGlobal("true",!0),l.setGlobal("false",!1);const v=1440*60*1e3,b={displayMenuItem:c,buildMetaTag:w,buildLinkTag:x,stringify:u,escape:f,stripTags:d,buildCategoryIcon:t,buildCategoryLabel:n,generateCategoryBackground:r,generateChildrenCategories:s,generateTopicClass:o,membershipBtn:a,spawnPrivilegeStates:g,localeToHTML:m,renderTopicImage:D,renderDigestAvatar:I,userAgentIcons:U,buildAvatar:W,increment:M,lessthan:H,greaterthan:K,generateWroteReplied:J,generateRepliedTo:F,generateWrote:k,encodeURIComponent:z,isoTimeToLocaleString:G,shouldHideReplyContainer:Y,humanReadableNumber:j,formattedNumber:Q,isNumber:V,txEscape:X,uploadBasename:Z,generatePlaceholderWave:q,register:_,__escape:P};function P(e){return e}function c(e,i){const p=e.navigation[i];return!(!p||p.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||p.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||p.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function w(e){const i=e.name?'name="'+e.name+'" ':"",p=e.property?'property="'+e.property+'" ':"",y=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+i+p+y+`/>
	`}function x(e){const i=["link","rel","as","type","href","hreflang","sizes","title","crossorigin"],[p,y,R,S,T,O,C,L,N]=i.map(B=>e[B]?`${B}="${e[B]}" `:"");return"<link "+p+y+R+S+C+L+T+O+N+`/>
	`}function u(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function f(e){return E.escapeHTML(e)}function d(e){return E.stripHTMLTags(e)}function t(e,i,p){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${p}" style="${r(e)} width:${i}; height: ${i}; font-size: ${parseInt(i,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function n(e,i="a",p=""){if(!e)return"";const y=i==="a"?`href="${h}/category/${e.slug}"`:"";return`<${i} component="topic/category" ${y} class="badge px-1 text-truncate text-decoration-none ${p}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${i}>`}function r(e){if(!e)return"";const i=[];return e.bgColor&&(i.push("background-color: "+e.bgColor),i.push(`border-color: ${e.bgColor}!important`)),e.color&&i.push("color: "+e.color),e.backgroundImage&&(i.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&i.push("background-size: "+e.imageClass)),i.join("; ")+";"}function s(e){let i="";return!e||!e.children||!e.children.length||(e.children.forEach(function(p){if(p&&!p.isSection){const y=p.link?p.link:h+"/category/"+p.slug;i+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+r(p)+'"><i class="fa fa-fw '+p.icon+'"></i></div><a href="'+y+'"><small>'+p.name+"</small></a></span>"}}),i=i&&'<span class="category-children">'+i+"</span>"),i}function o(e){return["locked","pinned","deleted","unread","scheduled"].filter(p=>!!e[p]).join(" ")}function a(e,i=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${i}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${i}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${i}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function g(e,i,p,y){const R=[];for(const[S,T]of Object.entries(p))R.push({name:S,state:T,type:y[S]});return R.map(function(S){const T=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],O=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],C=["groups:moderate"];let L=["groups:view:users","groups:find","groups:read","groups:topics:read","groups:topics:create","groups:topics:reply","groups:topics:tag","groups:posts:edit","groups:posts:history","groups:posts:delete","groups:posts:upvote","groups:posts:downvote","groups:topics:delete"];e===-1&&(L=L.slice(3));const N=i==="guests"&&(T.includes(S.name)||S.name.startsWith("groups:admin:"))||i==="spiders"&&!O.includes(S.name)||i==="fediverse"&&!L.includes(S.name)||i==="Global Moderators"&&C.includes(S.name);return`
				<td data-privilege="${S.name}" data-value="${S.state}" data-type="${S.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none${N?' d-none"':""}" autocomplete="off" type="checkbox"${S.state?" checked":""}${N?' disabled="disabled" aria-diabled="true"':""} />
					</div>
				</td>
			`}).join("")}function m(e,i){return e=e||i||"en-GB",e.replace("_","-")}function D(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.displayname+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.displayname+'" />'}function I(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function U(e){let i="";switch(e.platform){case"Linux":i+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":i+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":i+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":i+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":i+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":i+='<i class="fa fa-fw fa-mobile"></i>';break;default:i+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":i+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":i+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":i+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":i+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":i+='<i class="fa fa-fw fa-edge"></i>';break;default:i+='<i class="fa fa-fw fa-question-circle"></i>';break}return i}function W(e,i,p,y,R){e||(e=this),y=y||"";const S=new Map([["title",e.displayname],["data-uid",e.uid],["class",`avatar ${y}${p?" avatar-rounded":""}`]]),T=[`--avatar-size: ${i};`],O=L=>Array.from(L).reduce((N,[B,ee])=>(N+=` ${B}="${ee}"`,N),"");let C="";return e.picture&&(C+=`<img${O(S)} alt="${e.displayname}" loading="lazy" component="${R||"avatar/picture"}" src="${e.picture}" style="${T.join(" ")}" onError="this.remove()" itemprop="image" />`),C+=`<span${O(S)} component="${R||"avatar/icon"}" style="${T.join(" ")} background-color: ${e["icon:bgColor"]}">${e["icon:text"]}</span>`,C}function M(e,i){return String(e+parseInt(i,10))}function H(e,i){return parseInt(e,10)<parseInt(i,10)}function K(e,i){return parseInt(e,10)>parseInt(i,10)}function J(e,i){return e.toPid?F(e,i):k(e,i)}function F(e,i){const p=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-i*v?"on":"ago"}, ${e.toPid}, ${h}/post/${encodeURIComponent(e.toPid)}, ${p}, ${h}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function k(e,i){return`[[topic:wrote-${e.timestamp<Date.now()-i*v?"on":"ago"}, ${h}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function z(e){return encodeURIComponent(e)}function G(e,i="en-GB"){return new Date(e).toLocaleString([i],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function Y(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function j(e,i=1){return E.makeNumberHumanReadable(e,i)}function Q(e){return E.addCommas(e)}function V(e){return E.isNumber(e)}function X(e){return String(e).replace(/%/g,"&#37;").replace(/,/g,"&#44;")}function Z(e,i="/"){const p=/^\d+-/,y=e.substr(e.lastIndexOf(i)+1);return p.test(y)?y.slice(14):y}function q(e){return e.map(p=>p==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${p}"></div>
			</li>`).join("")}function _(){Object.keys(b).forEach(function(e){l.registerHelper(e,b[e])})}return b}}),30076:((A,E,l)=>{"use strict";var h,v;const b=l(29869);h=[l(77918),l(81335)],v=(function(P,c){return b(P,c,config.relative_path)}).apply(E,h),v!==void 0&&(A.exports=v)}),36159:((A,E,l)=>{"use strict";var h,v;h=[l(49897),l(33530),l(29930),l(24187),l(81335),l(17459),l(65285)],v=(function(b,P,c,w,x,u){const f={};return f.get=d=>b.get(`/topics/${d}/thumbs`,{thumbsOnly:1}),f.delete=(d,t)=>b.del(`/topics/${d}/thumbs`,{path:t}),f.updateTopicThumbs=async d=>{const t=await f.get(d),n=await app.parseAndTranslate("partials/topic/thumbs",{thumbs:t});$('[component="topic/thumb/list"]').html(n)},f.deleteAll=d=>{f.get(d).then(t=>{Promise.all(t.map(n=>f.delete(d,n.url)))})},f.upload=()=>new Promise(d=>{w.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+"/api/topic/thumb/upload"},function(t){d(t)})}),f.modal={},f.modal.open=function(d){const{id:t,postData:n}=d;let{modal:r}=d;const s=n.thumbs||[];return new Promise(o=>{x.render("modals/topic-thumbs",{thumbs:s}).then(a=>{r?u.translate(a,function(g){r.find(".bootbox-body").html(g),f.modal.handleSort({modal:r,thumbs:s})}):(r=P.dialog({title:"[[modules:thumbs.modal.title]]",message:a,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(f.upload().then(g=>{n.thumbs.push(g.replace(new RegExp(`^${config.upload_url}`),"")),f.modal.open({...d,modal:r}),Promise.all([l.e(20056),l.e(40559),l.e(449),l.e(5785),l.e(52185)]).then(function(){var m=[l(71431)];(D=>{D.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),o()}).apply(null,m)}).catch(l.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),f.modal.handleDelete({...d,modal:r}),f.modal.handleSort({modal:r,thumbs:s}))})})},f.modal.handleDelete=d=>{const t=d.modal.get(0),{id:n}=d;t.addEventListener("click",r=>{r.target.closest('button[data-action="remove"]')&&P.confirm("[[modules:thumbs.modal.confirm-remove]]",s=>{if(!s)return;const o=r.target.closest("[data-path]").getAttribute("data-path"),a=d.postData;a&&a.thumbs&&a.thumbs.includes(o)&&(a.thumbs=a.thumbs.filter(g=>g!==o),f.modal.open(d),Promise.all([l.e(20056),l.e(40559),l.e(449),l.e(5785),l.e(52185)]).then(function(){var g=[l(71431)];(m=>{m.updateThumbCount(n,$(`[component="composer"][data-uuid="${n}"]`))}).apply(null,g)}).catch(l.oe))})})},f.modal.handleSort=({modal:d,thumbs:t})=>{if(t.length>1){const n=d.find(".topic-thumbs-modal");n.sortable({items:"[data-path]"}),n.on("sortupdate",function(){if(!t)return;const r=[];n.find("[data-path]").each(function(){const s=$(this).attr("data-path"),o=t.find(a=>a===s);o&&r.push(o)}),t.length=0,Array.prototype.push.apply(t,r)})}},f}).apply(E,h),v!==void 0&&(A.exports=v)}),49897:((A,E,l)=>{"use strict";l.r(E),l.d(E,{del:()=>r,get:()=>u,head:()=>f,patch:()=>t,post:()=>d,put:()=>n});var h=l(91749),v=l.n(h),b=l(33530),P=l.n(b);const c=config.relative_path+"/api/v3";async function w(s,o){if(s.url=s.url.startsWith("/api")?config.relative_path+s.url:c+s.url,typeof o=="function"){x(s).then(a=>o(null,a),a=>o(a));return}try{return await x(s)}catch(a){if(a.message==="A valid login session was not found. Please log in and try again."){const{url:g}=await(0,h.fire)("filter:admin.reauth",{url:"login"});return(0,b.confirm)("[[error:api.reauth-required]]",m=>{m&&ajaxify.go(g)})}throw a}}async function x(s){const{url:o}=s;delete s.url,s.data&&!(s.data instanceof FormData)&&(s.data=JSON.stringify(s.data||{}),s.headers["content-type"]="application/json; charset=utf-8"),{options:s}=await(0,h.fire)("filter:api.options",{options:s}),s.data&&(s.body=s.data,delete s.data);const a=await fetch(o,s),{headers:g}=a;if(g.get("x-redirect"))return x({url:g.get("x-redirect"),...s});const m=g.get("content-type"),D=m&&m.startsWith("application/json");let I;if(s.method!=="HEAD"&&(D?I=await a.json():I=await a.text()),!a.ok)throw I?new Error(D?I.status.message:I):new Error(a.statusText);return D&&I&&I.hasOwnProperty("status")&&I.hasOwnProperty("response")?I.response:I}function u(s,o,a){return w({url:s+(o&&Object.keys(o).length?"?"+$.param(o):"")},a)}function f(s,o,a){return w({url:s+(o&&Object.keys(o).length?"?"+$.param(o):""),method:"HEAD"},a)}function d(s,o,a){return w({url:s,method:"POST",data:o,headers:{"x-csrf-token":config.csrf_token}},a)}function t(s,o,a){return w({url:s,method:"PATCH",data:o,headers:{"x-csrf-token":config.csrf_token}},a)}function n(s,o,a){return w({url:s,method:"PUT",data:o,headers:{"x-csrf-token":config.csrf_token}},a)}function r(s,o,a){return w({url:s,method:"DELETE",data:o,headers:{"x-csrf-token":config.csrf_token}},a)}}),74566:((A,E,l)=>{A.exports=l(12236)})}]);
